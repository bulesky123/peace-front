{"version":3,"file":"pages/my/index.js","sources":["webpack:///._src_pages_my_index.tsx","webpack:///._src_pages_my_index.less","webpack:///./src/pages/my/index.tsx?3add"],"sourcesContent":["import Taro from '@tarojs/taro'\r\nimport { View, Image } from '@tarojs/components'\r\nimport { AtIcon, AtMessage } from 'taro-ui'\r\nimport React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport { getUserInfo } from '../in/redux'\r\nimport bg from './images/bg.png'\r\nimport './index.less'\r\nimport logo from '../home/images/fb.png'\r\n\r\n@connect(\r\n  state => ({\r\n    headImageUrl: state.in.headImageUrl,\r\n    nickName: state.in.nickName,\r\n  }),\r\n  dispatch => bindActionCreators({\r\n    getUserInfo,\r\n  }, dispatch),\r\n)\r\nclass My extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.subscribeMessage = this.subscribeMessage.bind(this)\r\n  }\r\n  componentDidMount() {\r\n    // 获取用户的信息\r\n    this.props.getUserInfo()\r\n  }\r\n  jumpUrl(url) {\r\n    Taro.navigateTo({\r\n      url\r\n    })\r\n  }\r\n  subscribeMessage() {\r\n    Taro.getSetting({\r\n      withSubscriptions: true,\r\n      success(res) {\r\n        // console.log(res.authSetting)\r\n        // userInfo 是否授权用户信息，对应接口 wx.getUserInfo\r\n        // userLocation 是否授权地理位置，对应接口 wx.getLocation, wx.chooseLocation\r\n        // address 是否授权通讯地址，已取消此项授权，会默认返回true\r\n        // invoiceTitle 是否授权发票抬头，已取消此项授权，会默认返回true\r\n        // invoice 是否授权获取发票，已取消此项授权，会默认返回true\r\n        // werun 是否授权微信运动步数，对应接口 wx.getWeRunData\r\n        // record 是否授权录音功能，对应接口 wx.startRecord\r\n        // writePhotosAlbum 是否授权保存到相册 wx.saveImageToPhotosAlbum, wx.saveVideoToPhotosAlbum\r\n        // camera 是否授权摄像头，对应[camera]((camera)) 组件\r\n        // bluetooth 是否授权蓝牙，对应接口 wx.openBluetoothAdapter、wx.createBLEPeripheralServer\r\n        // addPhoneContact 是否添加通讯录联系人，对应接口 wx.addPhoneContact\r\n        // addPhoneCalendar 是否授权系统日历，对应接口 wx.addPhoneRepeatCalendar、wx.addPhoneCalendar\r\n        console.log(res.subscriptionsSetting)\r\n        // if (!res.subscriptionsSetting?.mainSwitch) {\r\n        //   Taro.requestSubscribeMessage({\r\n        //     tmplIds: ['9u4ItXlg8fTCfF8i8hmtygLmW94yH46I8nrBCihcnJE'],\r\n        //     success(res) {\r\n        //       console.log(res, 'res')\r\n        //     },\r\n        //     complete(res) { console.log(res, 'complete') }\r\n        //   })\r\n        // } else {\r\n        //   Taro.atMessage({\r\n        //     message: '已经获取过了',\r\n        //     type: 'info',\r\n        //   })\r\n        // }\r\n        Taro.requestSubscribeMessage({\r\n          tmplIds: ['9u4ItXlg8fTCfF8i8hmtygLmW94yH46I8nrBCihcnJE'],\r\n          success(res) {\r\n            console.log(res, 'res')\r\n          },\r\n          complete(res) { console.log(res, 'complete') }\r\n        })\r\n      }\r\n    })\r\n  }\r\n  render() {\r\n    return (\r\n      <View className='my_container'>\r\n        <View className='heade-container'>\r\n          <View className='head'>\r\n            <View className='head-image'><Image className='logo' src={this.props?.headImageUrl || logo} /></View>\r\n            <View className='name'>{this.props?.nickName || '***'}</View>\r\n          </View>\r\n        </View>\r\n        <View className='content'>\r\n          <View className='list' onClick={() => this.jumpUrl('/pages/moduleA/pages/commonManager/index')}>\r\n            <View className='item-msg'>添加共同管理人</View>\r\n            <AtIcon value='chevron-right' color='#ccc'></AtIcon>\r\n          </View>\r\n          <View className='list' onClick={() => this.jumpUrl('/pages/moduleA/pages/tanantRules/index')}>\r\n            <View className='item-msg'>租户须知</View>\r\n            <AtIcon value='chevron-right' color='#ccc'></AtIcon>\r\n          </View>\r\n          <View className='list' onClick={() => this.jumpUrl('/pages/moduleA/pages/share/index')}>\r\n            <View className='item-msg'>推荐给好友</View>\r\n            <AtIcon value='chevron-right' color='#ccc'></AtIcon>\r\n          </View>\r\n          <View className='list' onClick={() => this.jumpUrl('/pages/moduleA/pages/about/index')}>\r\n            <View className='item-msg'>关于我们</View>\r\n            <AtIcon value='chevron-right' color='#ccc'></AtIcon>\r\n          </View>\r\n          <View className='list' onClick={this.subscribeMessage}>\r\n            <View className='item-msg'>获取消息推送权限</View>\r\n            <AtIcon value='chevron-right' color='#ccc'></AtIcon>\r\n          </View>\r\n          <AtMessage />\r\n        </View>\r\n      </View>\r\n    )\r\n  }\r\n}\r\n\r\nexport default My","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/@tarojs/mini-runner/node_modules/babel-loader/lib/index.js!./index.tsx\"\nvar config = {\"navigationBarTitleText\":\"安心租-我的\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/my/index', {root:{cn:[]}}, config || {}))\n\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AAGA;AAAA;AAAA;AAAA;AAGA;;;;;;;;;;;ACjHA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}