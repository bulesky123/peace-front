{"version":3,"file":"common.js","sources":["webpack:///._src_api_home.ts","webpack:///._src_api_house.ts","webpack:///._src_api_my.ts","webpack:///._src_api_weixin.ts","webpack:///._src_components_form-picker_index.jsx","webpack:///._src_components_index.ts","webpack:///._src_components_menu_index.jsx","webpack:///._src_components_menu_index.less","webpack:///._src_constants_status.js","webpack:///._src_pages_home_images_fb.png","webpack:///._src_pages_in_redux.ts","webpack:///._src_pages_moduleA_pages_floorDetail_images_more.png","webpack:///._src_pages_moduleA_pages_house_redux.ts","webpack:///._src_utils_common.ts","webpack:///._src_utils_env.ts","webpack:///._src_utils_error.ts","webpack:///._src_utils_http.ts"],"sourcesContent":["import Http from '../utils/http'\r\nimport { HTTP_VERSION } from '../constants/status'\r\n\r\nexport const userLogin = params => Http.post(`/wechat/${HTTP_VERSION}/userLogin`, params)","import Http from '../utils/http'\r\nimport { HTTP_VERSION } from '../constants/status'\r\n\r\nexport const getHouse = params => Http.post(`/house/${HTTP_VERSION}/list`, params)\r\nexport const addHouse = params => Http.post(`/house/${HTTP_VERSION}/add`, params)\r\nexport const queryHouseDetail = params => Http.post(`/house/${HTTP_VERSION}/detail`, params)","import Http from '../utils/http'\r\nimport { HTTP_VERSION } from '../constants/status'\r\n\r\nexport const userInfo = params => Http.post(`/user/${HTTP_VERSION}/info`, params)","import Http from '../utils/http'\r\nimport { HTTP_VERSION } from '../constants/status'\r\n\r\nexport const addNickName = params => Http.post(`/wechat/${HTTP_VERSION}/addNickName`, params)\r\nexport const addMobile= params => Http.post(`/wechat/${HTTP_VERSION}/bindMobile`, params)","import React, { useState, useEffect } from 'react'\r\nimport { View, Text, Picker } from \"@tarojs/components\"\r\nimport { AtIcon } from 'taro-ui'\r\n\r\nexport default (props) => {\r\n  const [stateValue, setState] = useState('')\r\n  const { \r\n    lable = 'lable', \r\n    placeholder = '请输入（必填）',\r\n    range = [],\r\n    onChange = () => null,\r\n    hasIcon = true,\r\n    state,\r\n  } = props\r\n  useEffect(() => {\r\n    setState(state)\r\n  }, [state])\r\n  const handlChange = (e) => {\r\n    const value = range[e.detail.value]\r\n    setState(value)\r\n    onChange(value)\r\n  }\r\n  return (\r\n    <View className='input-item'>\r\n      <Text className='input-label'>{lable}</Text>\r\n      <Picker\r\n        className='input-test'\r\n        {...props}\r\n        placeholder={placeholder}\r\n        mode='selector'\r\n        range={range}\r\n        onChange={handlChange}\r\n      >\r\n        <View className='picker'>\r\n          {stateValue} {hasIcon && <AtIcon value='chevron-right' size='20'></AtIcon>}\r\n        </View>\r\n      </Picker>\r\n    </View>\r\n  )\r\n}","import FormPicker from './form-picker'\r\nimport Menu from './menu'\r\n\r\nexport { FormPicker, Menu }","import React, { useState, useEffect } from 'react'\r\nimport { View } from \"@tarojs/components\"\r\nimport './index.less'\r\n\r\nexport default (props) => {\r\n  const { data = [1, 2], style } = props\r\n  return (\r\n    <View className='menu-list' style={style} onClick={props.onClick}>\r\n      {\r\n        data.map((item, index) => (\r\n          <View className='menu-item' key={index} onClick={item.onClick}>{item.label}</View>\r\n        ))\r\n      }\r\n    </View>\r\n  )\r\n}","// extracted by mini-css-extract-plugin","export const HTTP_STATUS = {\r\n  SUCCESS: 200,\r\n  CREATED: 201,\r\n  ACCEPTED: 202,\r\n  CLIENT_ERROR: 400,\r\n  AUTHENTICATE: 301,\r\n  FORBIDDEN: 403,\r\n  NOT_FOUND: 404,\r\n  SERVER_ERROR: 500,\r\n  BAD_GATEWAY: 502,\r\n  SERVICE_UNAVAILABLE: 503,\r\n  GATEWAY_TIMEOUT: 504\r\n}\r\n  \r\nexport const REFRESH_STATUS = {\r\n  NORMAL: 0,\r\n  REFRESHING: 1,\r\n  NO_MORE_DATA: 2\r\n}\r\n\r\nexport const HTTP_VERSION = 'v1'\r\n  ","module.exports = __webpack_public_path__ + \"pages/home/images/fb.png\";","import Taro from '@tarojs/taro'\r\nimport { userLogin } from '../../api/home'\r\nimport { userInfo } from '../../api/my'\r\nimport { addNickName, addMobile } from '../../api/weixin'\r\nimport Tools from '../../utils/tools'\r\n\r\n// Actions\r\nconst UPDATE = 'GLOBAL_UPDATE'\r\n\r\n// Reducer\r\nconst initState = {\r\n  init: false,\r\n  nicknameFlag: false,\r\n  mobileFlag: false,\r\n  userInfo: {\r\n    token: '',\r\n    headImageUrl: '',\r\n    nickName: '',\r\n    phone: '',\r\n  },\r\n}\r\n\r\nexport default (state = initState, action) => {\r\n  switch (action.type) {\r\n    case UPDATE:\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\n// Action Creators\r\nexport const globalUpdate = params => ({\r\n  payload: params,\r\n  type: UPDATE,\r\n})\r\n\r\nexport const codeForOpenId = () => async (dispatch) => {\r\n  Taro.login({\r\n    success: async function (res) {\r\n      if (res.code) {\r\n        //发起网络请求\r\n        Taro.switchTab({\r\n          url: '/pages/home/index'\r\n        })\r\n        try {\r\n          const { data } = await userLogin({jsCode: res.code}) || {}\r\n          const json = data.data || {}\r\n          dispatch(globalUpdate({\r\n            token: json.peaceToken,\r\n            nicknameFlag: json.nicknameFlag,\r\n            mobileFlag: json.mobileFlag,\r\n          }))\r\n          Taro.setStorageSync('Peace-X-Token', json.peaceToken)\r\n          Taro.switchTab({\r\n            url: '/pages/home/index'\r\n          })\r\n        } catch (err) {\r\n          console.log(`请求接口userLogin失败：${err}`)\r\n        }\r\n      } else {\r\n        console.log('登录失败！' + res.errMsg)\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\n\r\nexport const getUserInfo = () => async(dispatch) => {\r\n  const { data } = await userInfo({}) || {}\r\n  const { headImageUrl, nickName } = data.data\r\n  dispatch(globalUpdate({\r\n    headImageUrl,\r\n    nickName,\r\n  }))\r\n}\r\n\r\nexport const addName = (params) => async(dispatch) => {\r\n  await addNickName(params) || {}\r\n  dispatch(globalUpdate({\r\n    ...params,\r\n    nicknameFlag: true,\r\n  }))\r\n}\r\nexport const addPhone = (params) => async (dispatch) => {\r\n  await addMobile(params) || {}\r\n  dispatch(globalUpdate({\r\n    mobileFlag: true,\r\n  }))\r\n}\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAICAYAAACYhf2vAAAAAXNSR0IArs4c6QAAAQNJREFUOE/F078rRXEYBvDPlSg/yuLXcEfFIIuUhVHJYjYy3D9A4o9QIrPFYlH8B1JGikGJzSJCzC69dW59O33PNd5Tp07P+7zP9/m+73NqOvzUkvPjewqjeMcdmm38DRX8bjzg5Z+7TGIcH4X2T/BTA6uYSUTucVIhOowN9Bb1EDvCcwV/BbNJ7RHHqYE+bGWad/GdwZcwX8JvcJbh9mAbXaXafky6NYEBbGaa9/CZwZcxV8JvcZrhxpR2MvghXtMVNDCWECMHB/jNNE9grYSf47piBeuoJ7UvxOWaqYFBLGAEQbjAW5tgTSPeCOETrirMhkQ/FouAx0ovW6FNDXTkh/wDOlMsCW3yCSgAAAAASUVORK5CYII=\"","import { getHouse } from '../../../../api/house'\r\n\r\n// Actions\r\nconst UPDATE = 'HOUSE_UPDATE'\r\n\r\n// Reducer\r\nconst initState = {\r\n  list: [],\r\n}\r\n\r\nexport default (state = initState, action) => {\r\n  switch (action.type) {\r\n    case UPDATE:\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\n// Action Creators\r\nexport const houseUpdate = params => ({\r\n  payload: params,\r\n  type: UPDATE,\r\n})\r\n\r\n// \"emptyRoomCount\": 0,\r\n//  \"houseId\": 0,\r\n//  \"name\": \"string\",\r\n//  \"roomCount\": 0\r\nexport const getHouseList = () => async(dispatch) => {\r\n  const { data } = await getHouse({})\r\n  dispatch(houseUpdate({\r\n    list: data.data.length > 0 ?  data.data : [{\r\n      emptyRoomCount: 6,\r\n      houseId: 6,\r\n      name: \"红木林南1号楼\",\r\n      roomCount: 10\r\n    }],\r\n  }))\r\n}\r\n","\r\nexport const formatNumber = (n: number | string) : string => {\r\n  n = n.toString()\r\n  return n[1] ? n : '0' + n\r\n}\r\n\r\nexport const formatTime = date => {\r\n  const year = date.getFullYear()\r\n  const month = date.getMonth() + 1\r\n  const day = date.getDate()\r\n  const hour = date.getHours()\r\n  const minute = date.getMinutes()\r\n  const second = date.getSeconds()\r\n\r\n  return [year, month, day].map(formatNumber).join('-') + ' ' + [hour, minute, second].map(formatNumber).join(':')\r\n}\r\n\r\n// 格式化时间戳为日期\r\nexport const formatTimeStampToTime = (timestamp) => {\r\n  const date = new Date(timestamp);//时间戳为10位需*1000，时间戳为13位的话不需乘1000\r\n  const year = date.getFullYear();\r\n  const month = (date.getMonth()+1 < 10 ? '0'+(date.getMonth()+1) : date.getMonth()+1);\r\n  const day = date.getDate() < 10 ? `0${date.getDate()}` : date.getDate();\r\n  // const hour = date.getHours() + ':';\r\n  // const minutes = date.getMinutes() + ':';\r\n  // const second = date.getSeconds();\r\n  return `${year}-${month}-${day}`\r\n}\r\n","const config = {\r\n  development: {\r\n    baseUrl: 'https://zfeasy.com',\r\n  },\r\n  production: {\r\n    baseUrl: 'https://zfeasy.com',\r\n  },\r\n}\r\nconst env = config[process.env.NODE_ENV]\r\n\r\nexport default env","import { formatTime } from './common'\r\n/**\r\n *\r\n * @param {string} name 错误名字\r\n * @param {string} action 错误动作描述\r\n * @param {string} info 错误信息，通常是 fail 返回的\r\n */\r\n// eslint-disable-next-line\r\nexport const logError = (name: string, action: string, info?: string | object ) => {\r\n  if (!info) {\r\n    info = 'empty'\r\n  }\r\n  let time = formatTime(new Date())\r\n  console.error(time, name, action, info)\r\n  if (typeof info === 'object') {\r\n    info = JSON.stringify(info)\r\n  }\r\n}\r\n\r\n","import Taro from '@tarojs/taro'\r\nimport { HTTP_STATUS } from '../constants/status'\r\nimport env from './env'\r\nimport { logError } from './error'\r\n\r\nconst { baseUrl } = env\r\n\r\nexport default {\r\n  baseOptions(params, method = 'GET') {\r\n    let { url, data } = params\r\n    let contentType = 'application/json'\r\n    contentType = params.contentType || contentType\r\n    type OptionType = {\r\n      url: string,\r\n      data?: object | string,\r\n      method?: any,\r\n      header: object,\r\n      // mode: string,\r\n      success: any,\r\n      error: any,\r\n      xhrFields: object,\r\n    }\r\n    const option: OptionType = {\r\n      url: url.indexOf('http') !== -1 ? url : baseUrl + url,\r\n      data: data,\r\n      method: method,\r\n      header: {\r\n        'content-type': contentType,\r\n        'Peace-X-Token': Taro.getStorageSync('Peace-X-Token') || 'AAAA'\r\n      },\r\n      // mode: 'cors',\r\n      xhrFields: { withCredentials: true },\r\n      success(res) {\r\n        if (res.statusCode === HTTP_STATUS.NOT_FOUND) {\r\n          return logError('api', '请求资源不存在')\r\n        } else if (res.statusCode === HTTP_STATUS.BAD_GATEWAY) {\r\n          return logError('api', '服务端出现了问题')\r\n        } else if (res.statusCode === HTTP_STATUS.FORBIDDEN) {\r\n          return logError('api', '没有权限访问')\r\n        } else if (res.statusCode === HTTP_STATUS.AUTHENTICATE) {\r\n          Taro.clearStorage()\r\n          Taro.navigateTo({\r\n            url: '/pages/packageA/pages/login/index'\r\n          })\r\n          return logError('api', '请先登录')\r\n        } else if (res.statusCode === HTTP_STATUS.SUCCESS) {\r\n          return res.data\r\n        }\r\n      },\r\n      error(e) {\r\n        logError('api', '请求接口出现问题', e)\r\n      }\r\n    }\r\n    // eslint-disable-next-line\r\n    return Taro.request(option)\r\n  },\r\n  get(url, data?: object) {\r\n    let option = { url, data }\r\n    return this.baseOptions(option)\r\n  },\r\n  post: function (url, data?: object, contentType?: string) {\r\n    let params = { url, data, contentType }\r\n    return this.baseOptions(params, 'POST')\r\n  },\r\n  put(url, data?: object) {\r\n    let option = { url, data }\r\n    return this.baseOptions(option, 'PUT')\r\n  },\r\n  delete(url, data?: object) {\r\n    let option = { url, data }\r\n    return this.baseOptions(option, 'DELETE')\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;ACJA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAGA;;;;;;;;;;;;;ACvCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;;ACDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAIA;;;;;;;;;;;ACfA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;ACpBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AAIA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;AC5FA;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AAIA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACzCA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;;A","sourceRoot":""}